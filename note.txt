LOGIKA BUDOWANIA PRZEPISÓW
PODSTAWOWE POLA PRZEPISU:
name – nazwa przepisu
type – typ posiłku: dinner, snack, soup, dessert, salad, other
images – jeśli brak zdjęć, zapisujemy [""]
portions – liczba porcji, wszystkie ilości składników przeliczamy na wszystkie porcje
time – czas przygotowania w minutach
SKŁADNIKI (ingredients):
Przepis dzielony jest na grupy składników (RecipeIngredientGroup):
title – nazwa grupy (np. „Mięso”, „Sosy”)
items – lista składników (Ingredient[])
excludeFromCalc – jeśli true, składniki tej grupy nie są liczone do kalorii (Dotyczy np. dodatków do dań)
Każdy składnik (Ingredient) ma:
ingredient:
name – nazwa składnika
type – typ składnika (met, fsh, dir, fat, veg, frt, grn, spc, sau, egg, che, wat, msh, pot, nut, hrb, oth)
kcalPer100g – kaloryczność na 100 g
unitWeights – opcjonalna mapa jednostek na gramy
defaultUnit – domyślna jednostka (jeśli brak w unit, przyjmujemy g)
amount – ilość składnika dla wszystkich porcji. Jeśli brak, nie liczymy kalorii (chyba że typ fat – wtedy standardowa ilość * liczba porcji)
unit – jednostka. Jeśli różna od domyślnej i nie gram, zamapować na gramy przy użyciu unitWeights
ZASADY LICZENIA KALORII SKŁADNIKA:
Jeśli excludeFromCalc w grupie = true → składniki ignorujemy
Jeśli amount nie podano → nie liczymy kcal, chyba że typ = fat → używamy standardowej ilości * liczba porcji
defaultUnit zawsze traktujemy jako jednostkę bazową, jeśli brak unit → przyjmujemy domyślną jednostkę (g)
Ilości składników zapisujemy dla wszystkich porcji (amount * portions)
ETAPY PRZEPISU (steps):
Przepis dzielony jest na grupy etapów (RecipeStepGroup):
title – jeśli przepis ma tylko jeden etap, title = ""
steps – lista kroków w postaci stringów
SŁOWA KLUCZOWE (keyWords):
Lista słów kluczowych opisujących przepis
Nie mogą zawierać słów z nazwy przepisu (name)
OBLICZANIE KALORII CAŁKOWITYCH:
Iterujemy po wszystkich grupach składników
Pomijamy grupy excludeFromCalc
Dla każdego składnika:
Jeśli amount podano → kcal = (amount w g / 100) * kcalPer100g
Jeśli unit różna od g → zamieniamy na gramy przy użyciu unitWeights lub defaultUnit
Jeśli amount nie podano, ale typ = fat → używamy standardowej ilości * liczba porcji
PODSUMOWANIE ZASAD DOMYŚLNYCH:
Brak zdjęć → [""]
Jedna grupa kroków → title = ""
keyWords nie zawiera fragmentów name
Ilości składników przeliczane na wszystkie porcje
Brak amount → nie liczymy kcal (chyba że typ = fat)
Domyślna jednostka = g, jeśli inna jednostka jest zdefiniowana w unitWeights, zamapowana
Składniki excludeFromCalc nie wliczają się do kalorii